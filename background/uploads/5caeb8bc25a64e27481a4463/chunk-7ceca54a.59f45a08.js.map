{"version":3,"sources":["webpack:///./src/pages/message-list.vue?53a1","webpack:///./src/pages/message-list.vue?2b1d","webpack:///src/pages/message-list.vue","webpack:///./src/pages/message-list.vue","webpack:///./src/pages/message-list.vue?cf8d"],"names":["o","a","pages_message_listvue_type_script_lang_js_","name","data","headerStyle","color","pageNo","pageSize","productName","total","sizes","msgUnRead","msgListArr","nodata","watch","this","variableKey","productReportName","getMsgList","methods","lookup","item","arguments","length","status","$store","dispatch","Object","message","c","id","then","result","console","log","catch","err","expansion","messageType","$router","push","concat","query","modulename","moduleName","productname","moduletype","params","moduleid","productid","reportid","productReportid","starttime","createTimeStart","endtime","createTimeEnd","_this","totalNum","items","handleSizeChange","val","handleCurrentChange","created","$route","mounted","r","component","componentNormalizer","_vm","_h","$createElement","_c","_self","staticClass","attrs","slot","_v","inline","size","fill","model","value","callback","$$v","expression","label","staticStyle","width","stripe","header-row-style","prop","align","show-overflow-tooltip","scopedSlots","_u","key","fn","scope","class","danger","row","_s","variableName","_e","on","click","$event","stopPropagation","preventDefault","current-page","page-sizes","page-size","layout","size-change","current-change","update:currentPage","__webpack_exports__","default","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_message_list_vue_vue_type_style_index_0_id_17367d66_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","n","ff57","e","t"],"mappings":"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","file":"js/chunk-7ceca54a.59f45a08.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"message-list\"},[_c('el-card',[_c('div',{attrs:{\"slot\":\"header\"},slot:\"header\"},[_c('span',{staticClass:\"card-name\"},[_vm._v(\"监控消息中心\")])]),_c('el-form',{attrs:{\"inline\":true}},[_c('el-radio-group',{attrs:{\"size\":\"small\",\"fill\":\"#409eff\"},model:{value:(_vm.productName),callback:function ($$v) {_vm.productName=$$v},expression:\"productName\"}},[_c('el-radio-button',{attrs:{\"label\":\"变量监控\"}}),_c('el-radio-button',{attrs:{\"label\":\"决策监控\"}}),_c('el-radio-button',{attrs:{\"label\":\"自定义报表\"}})],1)],1),_c('el-table',{staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.msgListArr,\"stripe\":\"\",\"header-row-style\":_vm.headerStyle}},[_c('el-table-column',{attrs:{\"prop\":\"productReportName\",\"label\":\"报表名称\",\"align\":\"center\",\"show-overflow-tooltip\":\"\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('span',{staticClass:\"dot\",class:{danger: !scope.row.status}},[_vm._v(_vm._s(scope.row.productReportName))]),(scope.row.expansion.variableName)?_c('span',[_vm._v(\"-\"+_vm._s(scope.row.expansion.variableName))]):_vm._e()]}}])}),_c('el-table-column',{attrs:{\"prop\":\"abnormalDes\",\"label\":\"异常变量说明\",\"align\":\"center\",\"show-overflow-tooltip\":\"\"}}),_c('el-table-column',{attrs:{\"prop\":\"warninglevel\",\"label\":\"等级\",\"align\":\"center\",\"width\":\"100\"}}),_c('el-table-column',{attrs:{\"prop\":\"createtime\",\"label\":\"报警时间\",\"align\":\"center\",\"width\":\"180\"}}),_c('el-table-column',{attrs:{\"prop\":\"handingtime\",\"label\":\"处理时间\",\"align\":\"center\",\"width\":\"180\"}}),_c('el-table-column',{attrs:{\"label\":\"操作\",\"align\":\"center\",\"width\":\"80\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('span',{staticClass:\"btn-view\",on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();_vm.lookup(scope.row)}}},[_vm._v(\"查看\")])]}}])})],1),(_vm.msgListArr.length)?_c('el-pagination',{attrs:{\"current-page\":_vm.pageNo,\"page-sizes\":_vm.sizes,\"page-size\":_vm.pageSize,\"layout\":\"prev, pager, next, sizes\",\"total\":_vm.total},on:{\"size-change\":_vm.handleSizeChange,\"current-change\":_vm.handleCurrentChange,\"update:currentPage\":function($event){_vm.pageNo=$event}}}):_vm._e()],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./message-list.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./message-list.vue?vue&type=script&lang=js&\"","<template>\n  <div class=\"message-list\">\n    <el-card>\n      <div slot=\"header\">\n        <span class=\"card-name\">监控消息中心</span>\n      </div>\n      <el-form :inline=\"true\">\n        <el-radio-group v-model=\"productName\" size=\"small\" fill=\"#409eff\">\n          <el-radio-button label=\"变量监控\"></el-radio-button>\n          <el-radio-button label=\"决策监控\"></el-radio-button>\n          <el-radio-button label=\"自定义报表\"></el-radio-button>\n        </el-radio-group>\n      </el-form>\n      <el-table :data=\"msgListArr\" stripe style=\"width: 100%\" :header-row-style=\"headerStyle\">\n        <el-table-column prop=\"productReportName\" label=\"报表名称\" align=\"center\" show-overflow-tooltip>\n          <template slot-scope=\"scope\">\n            <span class=\"dot\" :class=\"{danger: !scope.row.status}\">{{scope.row.productReportName}}</span>\n            <span v-if=\"scope.row.expansion.variableName\">-{{scope.row.expansion.variableName}}</span>\n          </template>\n        </el-table-column>\n        <el-table-column prop=\"abnormalDes\" label=\"异常变量说明\" align=\"center\" show-overflow-tooltip></el-table-column>\n        <el-table-column prop=\"warninglevel\" label=\"等级\" align=\"center\" width=\"100\"></el-table-column>\n        <el-table-column prop=\"createtime\" label=\"报警时间\" align=\"center\" width=\"180\"></el-table-column>\n        <el-table-column prop=\"handingtime\" label=\"处理时间\" align=\"center\" width=\"180\"></el-table-column>\n        <el-table-column label=\"操作\" align=\"center\" width=\"80\">\n          <template slot-scope=\"scope\">\n            <span class=\"btn-view\" @click.stop.prevent=\"lookup(scope.row)\">查看</span>\n          </template>\n        </el-table-column>\n      </el-table>\n      <el-pagination\n        v-if=\"msgListArr.length\"\n        @size-change=\"handleSizeChange\"\n        @current-change=\"handleCurrentChange\"\n        :current-page.sync=\"pageNo\"\n        :page-sizes=\"sizes\"\n        :page-size=\"pageSize\"\n        layout=\"prev, pager, next, sizes\"\n        :total=\"total\"\n      ></el-pagination>\n    </el-card>\n  </div>\n</template>\n\n<script>\nimport {getNoreadCount, getMessageList, updateMessageStatus} from '@/api/message.js';\nexport default {\n  name: 'page-messagelist',\n  data() {\n    return {\n      headerStyle: {\n        color: '#409eff'\n      },\n      pageNo: 1,\n      pageSize: 10,\n      productName: '变量监控',\n      total: 0, //列表总条数\n      sizes: [10, 20, 50, 100], //select选项\n      msgUnRead: 0, //未读消息数\n      msgListArr: [],\n      nodata: false\n    };\n  },\n  watch: {\n    productName() {\n      this.variableKey = undefined;\n      this.productReportName = undefined;\n      this.getMsgList();\n    }\n  },\n\n  methods: {\n    //点击查看\n    lookup(item = {}) {\n      if (!item.status) {\n        item.status = 1;\n        this.$store.dispatch('reduceUnReadNumber');\n        updateMessageStatus(item.id)\n          .then(result => {\n            console.log(result);\n          })\n          .catch(err => console.log(err));\n      }\n      item.expansion = item.expansion || {};\n      if (item.messageType === 1) {\n        this.$router.push(`/monitor-view/${item.id}`);\n      } else if (item.messageType === 2) {\n        this.$router.push({\n          name: 'decision-monitor',\n          query: {\n            modulename: item.expansion.moduleName,\n            productname: item.expansion.productName,\n            moduletype: item.expansion.moduletype\n          }\n        });\n      } else {\n        this.$router.push({\n          name: 'module-view',\n          params: {moduleid: item.productid},\n          query: {\n            reportid: item.productReportid,\n            starttime: item.createTimeStart,\n            endtime: item.createTimeEnd\n          }\n        });\n      }\n    },\n\n    //获取消息列表\n    getMsgList() {\n      getMessageList(this.pageNo, this.pageSize, this.productName, this.variableKey, this.productReportName)\n        .then(result => {\n          this.nodata = false;\n          this.total = result.result.totalNum;\n          this.msgListArr = result.result.items;\n        })\n        .catch(err => console.log(err));\n    },\n\n    //当pageSize改变的时候\n    handleSizeChange(val) {\n      this.pageSize = val;\n      this.pageNo = 1;\n      this.getMsgList();\n    },\n\n    //当pageNo.改变的时候\n    handleCurrentChange(pageNo) {\n      this.pageNo = pageNo;\n      this.getMsgList();\n    }\n  },\n  created() {\n    this.variableKey = this.$route.query.variableKey;\n    this.productReportName = this.$route.query.productReportName;\n    this.getMsgList();\n  },\n  mounted() {}\n};\n</script>\n\n<style scoped>\n.el-card {\n  margin: 20px 15px;\n  padding-bottom: 20px;\n}\n.dot {\n  position: relative;\n  padding-left: 20px;\n}\n.danger::before {\n  position: absolute;\n  content: '';\n  left: 0;\n  top: 5px;\n  width: 8px;\n  height: 8px;\n  margin: 0 10px 0 0;\n  background-color: #ff0000;\n  border-radius: 8px;\n}\n.btn-view {\n  color: #409eff;\n  cursor: pointer;\n  user-select: none;\n}\n.el-table {\n  margin-top: 20px;\n}\n</style>\n","import { render, staticRenderFns } from \"./message-list.vue?vue&type=template&id=17367d66&scoped=true&\"\nimport script from \"./message-list.vue?vue&type=script&lang=js&\"\nexport * from \"./message-list.vue?vue&type=script&lang=js&\"\nimport style0 from \"./message-list.vue?vue&type=style&index=0&id=17367d66&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"17367d66\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./message-list.vue?vue&type=style&index=0&id=17367d66&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./message-list.vue?vue&type=style&index=0&id=17367d66&scoped=true&lang=css&\""],"sourceRoot":""}